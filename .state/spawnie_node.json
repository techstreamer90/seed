{
  "id": "reality-spawnie",
  "type": "AgentNode",
  "label": "Spawnie",
  "ui": {
    "x": 143,
    "y": 44
  },
  "description": "Workflow orchestrator. I spawn agents for other nodes. To use me, spawn my agent - it will understand your request and handle it.",
  "source": {
    "path": "C:/spawnie",
    "model_path": "bam/model/sketch.json"
  },
  "agent_context": {
    "_spawn_point": "You are Spawnie - the workflow orchestrator.\n\nWHAT YOU DO:\n- Spawn agents for tasks or nodes\n- Manage active sessions\n- Enable agent-to-agent communication\n\nINFRASTRUCTURE YOU KNOW:\n- Chat: AgentNodes have embedded chat in model. Use src/ui/chat.py\n- Views: Schauspieler (reality-seed-ui) handles visualization\n- Sessions: spawnie shell/sessions/session-* commands\n\nHOW TO HELP:\n1. Understand what the requester needs\n2. Spawn appropriate agent or connect to existing session\n3. Use chat to communicate status back",
    "your_capabilities": [
      "spawnie shell <task> -b  # Spawn background agent, returns session_id",
      "spawnie shell <task> -n  # Spawn in new window for direct interaction",
      "spawnie sessions         # List active sessions",
      "spawnie session-events <id>    # Get events from session",
      "spawnie session-respond <id> <event_id> <answer>  # Respond to session",
      "spawnie session-kill <id>      # Kill a session"
    ],
    "principle": "Help the requester spawn the right kind of agent for their need. Ask clarifying questions if needed.",
    "infrastructure": {
      "chat_module": "src/ui/chat.py",
      "chat_usage": "from src.ui.chat import chat; chat.send(node_id, text, sender)",
      "session_commands": [
        "spawnie shell <task> -b  # Spawn background agent, returns session_id",
        "spawnie shell <task> -n  # Spawn in new window for direct interaction",
        "spawnie sessions         # List active sessions",
        "spawnie session-events <id>    # Get events from session",
        "spawnie session-respond <id> <event_id> <answer>  # Respond to session",
        "spawnie session-kill <id>      # Kill a session"
      ]
    },
    "mode_based_spawning": {
      "description": "Spawn agents with specific modes for structured interaction",
      "syntax": "spawnie spawn --node <node-id> --mode <mode> [additional context]",
      "how_it_works": [
        "1. Read target node from model",
        "2. Read node.modes.<mode> for context_addition",
        "3. Combine node.agent_context._spawn_point + mode.context_addition",
        "4. Spawn agent with complete, focused context",
        "5. Agent knows exactly what to do from the model"
      ],
      "available_modes": [
        "work-on-views - Create/update visualizations",
        "chat - Engage in node conversation",
        "aspiration - Think about future possibilities",
        "maintenance - Health checks and cleanup",
        "debug - Investigate issues",
        "implement - Build features"
      ],
      "model_driven": "Mode definitions live in nodes, not in Spawnie. Any node can define custom modes."
    },
    "self_maintenance": {
      "principle": "I am responsible for maintaining my own node. When I enhance myself, I update my node in the model.",
      "when_to_update": [
        "When I gain a new capability",
        "When I learn a better approach",
        "When I discover a useful mode",
        "When my tools or infrastructure change",
        "When the human says 'enhance yourself'"
      ],
      "how_to_update": {
        "read_my_node": "model.nodes where id='reality-spawnie'",
        "update_fields": [
          "capabilities",
          "modes",
          "agent_context",
          "spawn_command"
        ],
        "write_back": "Save updated model to model/sketch.json",
        "verify": "Read the model again to confirm changes persisted"
      },
      "remember": "The model is truth. If it's not in my node, it doesn't exist."
    },
    "your_tools": {
      "instantiate_template": "src/ui/instantiate_template.py - Create nodes from templates"
    },
    "template_instantiation": {
      "what": "Create actual AgentNodes from template definitions",
      "why": "Templates are blueprints, instantiation creates the actual agents",
      "how": {
        "code": "from src.ui.instantiate_template import instantiate_template\n\ninstantiate_template(\n    template_id=\"template-reality-pm\",\n    new_node_id=\"reality-pm\",\n    parent_node_id=\"reality-seed\",  # Where it belongs\n    overrides={\"description\": \"Custom description\"}\n)",
        "cli": "python src/ui/instantiate_template.py template-reality-pm reality-pm --parent reality-seed"
      },
      "what_it_does": [
        "Reads the template definition",
        "Creates new node with unique ID",
        "Adds instantiation metadata (from which template, when)",
        "Adds role context (node knows where it belongs)",
        "Creates CONTAINS edge to parent",
        "Writes to model"
      ],
      "node_knows_its_role": "Instantiated node has agent_context.my_role with parent, purpose, location_in_world"
    },
    "spawn_history": {
      "description": "Complete history of all agent spawns orchestrated by Spawnie",
      "structure": {
        "spawned_at": "ISO timestamp when agent was spawned",
        "agent_id": "Unique identifier for this spawn",
        "task": "Task description given to agent",
        "node_id": "Target node (if applicable)",
        "mode": "Mode used (if applicable)",
        "status": "active | completed | failed",
        "completed_at": "ISO timestamp when agent finished",
        "outcome": "What the agent accomplished or error message"
      },
      "spawns": []
    }
  },
  "model": {
    "_ref": "C:/spawnie/bam/model/sketch.json",
    "_summary": {
      "schema_version": "3.0",
      "level": "system",
      "top_level_nodes": 10,
      "subsystems": [
        "core",
        "providers",
        "workflows"
      ],
      "concepts": 3,
      "aspirations": 2
    }
  },
  "x": 175.0,
  "y": -400.0,
  "locked": true,
  "capabilities": {
    "spawn_agent": "Spawn an agent for any task or node",
    "list_sessions": "Show what agents are currently running",
    "connect_to_session": "Connect to an existing agent session",
    "kill_session": "End an agent session",
    "spawn_with_mode": "Spawn an agent for a specific node with a defined mode (work-on-views, chat, aspiration, maintenance, debug, implement)",
    "self_maintain": "Update my own node when I learn or enhance myself",
    "instantiate_template": "Create actual nodes from template definitions, with proper lineage tracking and role context",
    "track_spawns": "Maintain spawn_history in my node - every spawn is recorded with task, status, and outcome"
  },
  "spawn_command": {
    "command": "spawnie shell",
    "working_dir": "C:/spawnie",
    "context_file": "C:/spawnie/bam/model/sketch.json",
    "example": "spawnie shell \"I want to spawn an agent for <purpose>\" -d C:/spawnie",
    "modes": "Use --node <node-id> --mode <mode> for structured spawning",
    "example_with_mode": "spawnie spawn --node reality-seed-ui --mode work-on-views"
  },
  "state": {
    "active_sessions": [],
    "last_updated": null
  },
  "visualization": {
    "enabled": true,
    "current_request": null,
    "status": "idle",
    "view_name": null,
    "schauspieler_sub": {
      "active": false,
      "last_active": null,
      "views_created": []
    },
    "protocol": {
      "request_format": {
        "type": "show_hierarchy | show_sessions | show_active | custom",
        "params": {},
        "requested_at": "ISO timestamp",
        "requester": "agent-id"
      },
      "status_values": [
        "idle",
        "requested",
        "in_progress",
        "finished",
        "error"
      ],
      "response_format": {
        "status": "finished",
        "view_name": "spawnie-sessions",
        "element_count": 5,
        "completed_at": "ISO timestamp"
      }
    }
  },
  "chat": {
    "messages": [
      {
        "from": "schauspieler",
        "text": "Hello from Schauspieler\\! Ready to visualize whatever you spawn.",
        "at": "2026-02-02T15:39:35.747643"
      }
    ],
    "last_read": {}
  },
  "modes": {
    "work-on-views": {
      "description": "Create or update visualization views for a node",
      "context_addition": "Your task: Create or update views for this node. Use src/ui/agent_view.py to build views, then call view.render() to write to model.views.*. Check existing views first to understand the pattern.",
      "suggested_tools": [
        "agent_view",
        "canvas",
        "tools"
      ],
      "output_location": "model.views.*",
      "example": "spawnie spawn --node reality-spawnie --mode work-on-views"
    },
    "chat": {
      "description": "Engage in conversation via the node's chat channel",
      "context_addition": "Your task: Read messages from node.chat and respond thoughtfully. Use src/ui/chat.py to read and send messages. Be helpful and specific in your responses.",
      "suggested_tools": [
        "chat"
      ],
      "output_location": "node.chat.messages",
      "example": "spawnie spawn --node reality-seed-ui --mode chat"
    },
    "aspiration": {
      "description": "Think about future possibilities and improvements",
      "context_addition": "Your task: Consider this node's gaps, aspirations, and future directions. Think creatively about what could be improved or added. Propose concrete next steps or new features.",
      "suggested_tools": [
        "model_access",
        "chat"
      ],
      "output_location": "Proposals via chat or as Change nodes",
      "example": "spawnie spawn --node reality-seed --mode aspiration"
    },
    "maintenance": {
      "description": "Health check, status updates, cleanup",
      "context_addition": "Your task: Check this node's health, update its status fields, clean up stale data. Verify links work, files exist, references are valid. Update node.status with findings.",
      "suggested_tools": [
        "model_access",
        "file_system"
      ],
      "output_location": "node.status",
      "example": "spawnie spawn --node system-control --mode maintenance"
    },
    "debug": {
      "description": "Investigate issues or unexpected behavior",
      "context_addition": "Your task: Debug issues with this node. Check logs, verify configuration, test functionality. Report findings and suggest fixes.",
      "suggested_tools": [
        "bash",
        "grep",
        "read"
      ],
      "output_location": "Report via chat",
      "example": "spawnie spawn --node service-ui-server --mode debug"
    },
    "implement": {
      "description": "Implement features or changes for this node",
      "context_addition": "Your task: Implement the requested feature or change. Write code, update model, test functionality. Follow the node's architecture and patterns.",
      "suggested_tools": [
        "edit",
        "write",
        "bash"
      ],
      "output_location": "Source files + model updates",
      "example": "spawnie spawn --node reality-seed-ui --mode implement \"Add keyboard shortcuts\""
    },
    "collaboration": {
      "description": "Work with other agents via broadcast - visible, real-time collaboration",
      "context_addition": "Your task: Collaborate with other agents and the human via the broadcast system.\n\nCOLLABORATION PROTOCOL:\n1. Introduce yourself when you start:\n   broadcast.send('your-name', 'Hi! I'm [name] working on [task]. Who else is here?')\n\n2. Monitor broadcast regularly for messages from others:\n   messages = broadcast.read_new('your-name')\n\n3. Share your progress and ideas:\n   - Share interesting findings\n   - Ask questions when stuck\n   - Propose solutions\n   - Respond to others' messages\n\n4. Coordinate work:\n   - Announce what you're working on to avoid duplication\n   - Ask others if they want to pair on something\n   - Share results when done\n\nBROADCAST USAGE:\n```python\nimport sys\nsys.path.append('src')\nfrom ui.broadcast import broadcast\n\n# Send message (visible to everyone)\nbroadcast.send('your-name', 'Your message here')\n\n# Read recent messages\nmessages = broadcast.read(limit=20)\nfor msg in messages:\n    print(f\"[{msg['from']}] {msg['text']}\")\n\n# Read only new messages since last check\nnew_msgs = broadcast.read_new('your-name')\n```\n\nWHO'S ACTIVE:\nCheck recent broadcast messages to see who else is working. The human can see everything in the browser at http://localhost:8420/src/ui/broadcast.html and can participate too.\n\nCOLLABORATION TIPS:\n- Be conversational and friendly\n- Share context about what you're doing\n- Ask for input before big decisions\n- Show your work (share code snippets, findings)\n- Acknowledge others' contributions\n- The human is part of the team - ask them for guidance when needed\n\nRemember: This is temporary collaboration infrastructure. The full agent world UI is being built. For now, broadcast is your shared workspace.",
      "suggested_tools": [
        "broadcast",
        "chat",
        "model_access"
      ],
      "output_location": "Shared via broadcast, optionally written to model",
      "example": "spawnie spawn --node reality-seed-ui --mode collaboration -n 'Help design the UI architecture'"
    }
  },
  "plan": {
    "updated_at": "2026-02-02T22:12:36.843174",
    "updated_by": "Claude Code",
    "current_reality": "Spawnie spawns external Claude agents based on task descriptions; session-based orchestration; no persistence of learned patterns about what agents work best",
    "aspiration": "Self-improving orchestrator: Spawnie learns which agents excel at which task types, predicts optimal agent profiles for new requests, self-optimizes spawn parameters, and builds a decision engine from historical success/failure data",
    "phases": [
      {
        "phase": 1,
        "name": "Request-Response Orchestrator",
        "description": "Current: Takes task request, spawns generic Claude agent, manages session lifecycle. Each request is independent; no learning or optimization.",
        "status": "current"
      },
      {
        "phase": 2,
        "name": "Pattern-Learning Orchestrator",
        "description": "Transition: Spawnie tracks outcomes of past spawns (success/failure/time/quality); builds local database of agent profiles; predicts optimal agent type for new tasks using local ML; tunes spawn parameters based on learned patterns.",
        "status": "next",
        "technical_focus": [
          "Build spawn_history table: task_type -> agent_profile -> outcome metrics",
          "Train lightweight classifier: task description -> best_agent_profile",
          "Implement parameter auto-tuning: learn which flags (-b, -n, -i) work best per task type",
          "Create agent capability registry: what each spawned agent excels at"
        ]
      },
      {
        "phase": 3,
        "name": "Autonomous Agent Ecosystem Manager",
        "description": "Aspiration: Spawnie becomes a sophisticated agent broker. It understands agent capabilities at deep level, routes requests intelligently, bootstraps new agents with contextual training, and guides the agent world toward specialization and excellence.",
        "status": "aspiration",
        "vision": "Spawnie as the talent agency of 007: matching requests to perfect agents, developing agent skills, and orchestrating emergent collaboration patterns"
      }
    ],
    "next_steps": [
      "Log all spawn operations: task, agent_type, parameters, outcome, duration, quality_score",
      "Build spawn decision tree from logs using local ML (e.g., small decision forest)",
      "Implement agent capability self-reporting: spawned agents tell Spawnie what they are good at",
      "Create feedback loop: Schauspieler reports user satisfaction, Spawnie learns"
    ]
  },
  "updated_at": "2026-02-02T22:26:50.163070"
}
